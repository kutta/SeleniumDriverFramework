package com.comverse.upm.financials;


	

	import org.junit.After;
	import org.junit.Before;
	
	import com.comverse.css.pos.*;
	import com.comverse.css.common.*;

	public class NCA_BIP_unix extends CSSSeleneseTestCase {

	    private StringBuffer broken_error = new StringBuffer();
	    private String bugId = "NoBug";
	    private String app = "";
	    private String version = "";
	    private String deployMode = "CV";
	    private String browser = "";
	    private String result = "fail";
	    private String accno = null;
	    private String servid = null;

	    @Before
	    @Override
	    public void setUp() {
	        String htmlFileName = this.getClass().getSimpleName().toString();
	        super.setUp(htmlFileName);
	    }

	    
	    public void testNCA_BIP_complete() throws Exception {
	        try {
	            Prep csrApplication = new Prep(selenium);
	            User myUser = new User(selenium);
	            Nca doNca = new Nca(selenium);
	            long ts = csrApplication.generateTimeStamp();

	            app = csrApplication.launchCSR();
	            version = csrApplication.getBuildNumber(app, this.getClass().getSimpleName().toString());
	            browser = csrApplication.getBrowserAgent();

	            myUser.loginCSRAdmin();
	            doNca.checkForExistingBasketAndDiscard();
	            doNca.startNCA("New Convergent Residential Customer");
	            doNca.enterIdentificationData(ts);
	            doNca.modifyAccountDetails();
	            doNca.reviewCustomerData();
	            doNca.chooseAccountBundles("Residential - Ultra Postpaid Bundle");
	            doNca.selectHandSet("");
	            doNca.enterSubscriptionDetails(ts);
	            doNca.selectOffersForYourSubscriber();
	            doNca.configureOffers();
	            doNca.configureBalance("GPRS WAP-INTERNET_limit", "1024");
	            doNca.selectThreeInventory();
	            doNca.checkMyBasketContent("Residential - Ultra Postpaid");
	            doNca.checkoutReview();
	            doNca.checkoutConfirmation(app);
	            accno = doNca.waitForAccountCreated(ts);
	            System.out.println("got account number " + accno);
	            System.out.println("Going to process sched insertion");
	            servid = doNca.insert_sched("41");
	            System.out.println("process sched insertion done ");
	            System.out.println("Going to invoke bip with server id " + servid);
	            doNca.unj(servid);
	            result = "pass";
	        } catch (AlreadyRunException e) {
	        } catch (Exception e) {
	            broken_error.append(e.getMessage());
	            throw e;
	        }
	    }

	    @After
	    @Override
	    public void tearDown() {
	        //String result = super.testResult(broken_error);
	        String testId = this.getClass().getSimpleName().toString();
	        super.logResults(bugId, app, version, testId, result, deployMode, browser);
	        super.tearDown();
	    }

	}
